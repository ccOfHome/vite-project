name: Build and Deploy

on:
  # ç›‘å¬ main åˆ†æ”¯ä¸Šçš„ push äº‹ä»¶
  push:
    branches:
      - main
  # æ‰‹åŠ¨è§¦å‘éƒ¨ç½²
  # workflow_dispatch: 

jobs:
  build-and-deploy:
    # æ„å»ºç¯å¢ƒä½¿ç”¨ ubuntu
    runs-on: ubuntu-latest
    steps:
      # å°†ä»£ç æ‹‰åˆ°è™šæ‹Ÿæœº
      - name: Checkout
        uses: actions/checkout@v2.3.1  
        with:
          persist-credentials: false
      
       # ä¸‹è½½ä¾èµ– æ‰“åŒ…é¡¹ç›®
      - name: Install and Build
        run: |
          npm install
          npm run build
      
      # éƒ¨ç½²
      - name: Deploy ğŸš€ 
        uses: JamesIves/github-pages-deploy-action@v4.3.3
        with:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
          REPOSITORY_NAME: ccofhome/ccofhome.github.io
          # éƒ¨ç½²åæäº¤åˆ°çš„åˆ†æ”¯
          branch: static-pages
          # è¿™é‡Œå¡«æ‰“åŒ…å¥½çš„ç›®å½•åç§°
          folder: dist
